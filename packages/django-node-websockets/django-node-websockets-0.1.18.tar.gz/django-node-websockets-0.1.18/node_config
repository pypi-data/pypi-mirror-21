#!/usr/bin/env python
from argparse import ArgumentParser
from os import path

import websockets


if __name__ == "__main__":
    parser = ArgumentParser(description="Create a websocket config")
    parser.add_argument(
        "name"
    )
    args = parser.parse_args()

    path_to_websockets = path.abspath(path.join(path.dirname(websockets.__file__), "scripts")) 
    src = path.join(path_to_websockets, "config-sample.js")
    app_src = path.join(path_to_websockets, "app.js")
    dest = args.name + ".js"

    with open(src, "r") as read:
        with open(dest, "w") as write:
            content = read.read()
            content = content.replace("{{ app }}", app_src)
            write.write(content)
