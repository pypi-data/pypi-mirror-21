CHANGES
=======

1.55.1
------

* Add distributions for travis deployment
* Travis-CI integration

1.55.0
------

* CF-661 Invalid glance image URL breaks VM migration
* CF-659 Security groups with and without bitmask
* CF-657 restore_vms_state fails with ImportError
* CF-642 Incomplete migrations of attached volumes report failures
* CF-652 Mapping to nothing raises AttributeError
* CF-648 KeyError during quota migration
* CF-644 Make sure bbcp is installed on remote hosts in /tmp/bbcp
* Update installation instructions
* [CF-565] Add generic cinder volume migration
* Fix few bugs and prepare code for complex migrations
* Add keystone Role and User discovery
* [CF-570] Add network and subnet discovery
* [CF-569] Add flavor parameters discovery
* [CF-612] Creating cinder volume types
* [CF-636] Mark volumes on source cloud as deleted
* CF-641 Invalid report for tenant migration
* CF-640 Ephemeral migration failure
* CF-516 Migration report
* [CF-603] Extend functional tests to verify migration of user quota migration

1.54.0
------

* [CF-632] Set default blocksize for dd to 64k
* [CF-542] Extend functional tests to verify migration of VM with attached deleted volume
* Fix pylint issues
* [CF-598] Fix CheckBandwith action
* CF-547 Added link to new openstack boxes and deleted all unused strings
* Invalid JSON from qemu-img

1.53.0
------

* CF-601 Disable logging to stdout during functional tests execution
* CF-602 User quota migration speedup
* CF-605 Fix cloudferry_devlab reqiurements: test-generator

1.52.0
------

* CF-600 Make swift generation optional in generate_load and tests

1.51.0
------

* [CF-539] Fix requirements

1.50.0
------


1.49.0
------

* CF-591 Check if bbcp is installed and allowed to be owerwritten

1.48.0
------

* CF-580 Check available space before copying data
* CF-588 Some Functional Tests being skipped

1.47.0
------

* [CF-490] Delete failed volume
* [CF-490] Mute stdout of fabric
* [CF-490] Make a dump of databases
* [CF-498] Migrate volume with reattaching old files
* [CF-496] Use juno nfs share
* [CF-577] Modify scp copier to avoid "No space left on device" error
* [CF-402] Stop migration at ctrl+c
* CF-578 oslo.utils version conflict
* [CF-551] Extend functional tests to verify tenant mapping functionality
* Adds ruby style check and linter config
* CF-574 VM migration when backing file is not present
* CF-572 Add sanity checks to override_rules.yaml
* CF-572 Migrate volumes to non-default backends

1.46.0
------

* [CF-490] Use override rules to override volume_type

1.45.0
------

* [CF-424] Improve error reporting
* CF-562 Add debug logs to generate_load
* [CF-558] Add API call retrying to discover process

1.44.0
------

* [CF-552] Attachment object has no 'size' attribute
* [CF-483] Wait for status of images
* CF-522 Modify auto tests to run migration as non-root user
* Flush VM caches before shutting off
* Modify generate_load script to shut off all VMs
* CF-560 Volume migration for non-root user
* Fixes failing unittests for check_networks
* CF-554 SCP not having enough permissions to copy to destination
* Revert "CF-522 Modify auto tests to run migration as non-root user."
* [CF-545] Add ability to map different tenant names in src and dst
* CF-522 Modify auto tests to run migration as non-root user
* CF-550 Disable API rate limit for grizzly box
* [CF-544] Refactor filtering utils to include proper VMs filtering
* CF-378 Readable networks check
* [CF-505] Fix error when attachment exists but volume deleted
* [CF-543] Functional Tests should not verify flavor ID for VMs not migrated
* [CF-508] Support absent references during link stage
* CF-541 generate_load script fails

1.43.0
------

* CF-394 Extend functional tests to verify migration of deleted flavors CF-489 Extend Functional Tests to validate VM Migration with its flavor deleted on source cloud
* CF-219 Extend functional tests to verify users and tenants names in different cases migrate correctly CF-408 With tenant filter, functional tests verifying identity migration for all tenants CF-420 Verify the attributes for a "case insensitive" user/tenant after migration CF-455 Functional Test Failure message incorrect when no resource migrated to DST Cloud
* CF-362 Extend functional tests to include verification of black listed images CF-456 Last set of Functional Tests referring filter file of last migrated tenant for resource validation

1.42.0
------

* CF-532 Update outdated documentation
* [CF-493] Fix checking that VMs spawned in external networks
* Fix for CF-509 proper creation DST VMs
* [CF-528] Use proxy client in NovaCompute.change_status
* CF-509 generate_load.py to create VMs sequentially
* CF-524 Unit tests don't spawn ssh-agent anymore
* CF-519 Missing write permissions in destination for file copy
* Fix KeyError: 'CheckCopyEngineConfiguration'
* Shutting VMs off before returning their state
* CF-513 Refactor functional tests to remove unnecessary dependencies
* CF-445 Cleanup unused code
* CF-510 Script to start VMs which are powered off
* [CF-512] Add generate_load.py-ed boxes to Vagrantfile
* CF-515 FT jobs is failing with 'Nothing to migrate' error
* [CF-430] Improve configuration validation
* Use expect_exception for AttachVolumesCompute
* CF-504 Reduce amount of VMs used for devlab environment
* CF-503 Allow providing endpoint type
* Add more logging to generate_load.py
* [CF-499] Change NIC type to virtio for devlab
* CF-502 Disable available resources verification
* CF-480 VMs parameter validation functional test fails after icehouse to juno migration
* [CF-474] error during VM provisioning in destination cloud with generate_load.py
* [CF-429] Fix cinder migration using non-root user
* CF-451 Fix image migration functional tests to work with migrate2
* CF-466 Refactor parameter's validations for all OS objects
* [CF-479] Match VMs by vm_hash instead of name
* [CF-465] Fix checking that quotas are identical
* [CF-448] Checking the configuration of copy engines
* [CF-482] Hide ssl warnings Call disable_warnings() function to hide all ssl warnings
* CF-477 Incorrect validation of config_drive param in functional tests
* CF-465 Cinder quota migration fix
* CF-476 Failure to copy disk.local
* [CF-475] Add handling oh HTTP 504 to glance
* [CF-439] Fix vagrantfile not working
* [CF-250] Delete failed instances on dst
* [CF-439] Improve devlab VM load time
* [CF-473] Add filter-path, scenario and copy-backend options to migrate command
* CF-472 local_sudo_password pre-check
* CF-470 Wrong subnet chosen for enable_dhcp=False parameter

1.41.0
------

* [CF-450] Refactor discovery/model.py
* [CF-356] Implement query command
* [CF-401] Fix reset_state not makeing several attempts
* [CF-399] Print configuration, filter and scenario
* [CF-437] Use cliff library
* [CF-436] Add ImageMember migration
* CF-459 Verify subnet's DHCP option is preserved during migration
* [CF-458] Set enable_dhcp to original value on destination
* [CF-454] Use pbr library
* CF-453 Image migration failed with invalid ID
* CF-333 Extend functional tests to verify migration of config_drive VM attribute
* [CF-442] Fix absent image detection when it was deleted previously
* [CF-433] Handle image deleted from glance backend

1.40.0
------

* Only consider not migrated resources during estimation
* Always output estimated sizes in GB
* [CF-435] Fix attached volume discovery
* [CF-425] Improve OpenStack auth error reporting
* Add missing requirements
* Fix discover bug when ephemeral disk deleted
* [CF-432] Improve error reporting when password missing
* [CF-426] Add retrying to RemoteExecutor
* CF-339 Include autotests documentation to documentation-builder
* [CF-427] Fix error getting members of deleted images
* [CF-392] [CF-262] [CF-263] TaskFlow-based image migration
* Rewrite RemoteExecutor to use paramiko instead of fabric
* Add ability to interact with OpenStack databases
* Refactor config: remove OpenStack client functions
* CF-358 Need to refactor 'update_filtering_file' method

1.39.0
------

* [CF-409] Update user doc

1.38.0
------

* CF-400 Verify deleted image which have the same IDs as images in SRC
* [CF-378] Add `ext_net_map` check to `check_networks`
* [CF-4] Fix cloudferrylib references
* [CF-378] Delete obsolete networks' check
* CF-52 Extended tests for VM migration
* [CF-4] Cloudferry installable with pip
* [CF-4] Fix pylint issues
* [CF-4] Create cloudferry folder

1.37.0
------

* CF-384 Flavor access list for deleted flavors
* [CF-120] Fix "Port is still in use" when attempt boot VM second time
* CF-388 HTTP 400 Bad Request on nova boot
* CF-398 Improving waiting VM accessibility by SSH in generate load
* [CF-397] Remove CloudFerry log Rotating
* Update requirements

1.36.0
------

* [CF-188] Restore the behavior of direct_transfer option
* [CF-357] Migrate resources with filter by default
* [CF-272] Documentation for objects discovery process
* [CF-383] Add stage for matching objects in clouds
* Fix and optimize functional tests

1.35.0
------

* [CF-376] Use boot_timeout and storage_backend_timeout options
* CF-380, 338 Post migration tests fail being unable to connect to VM
* CF-375 CF instance migration does not consider existing images
* [CF-240] Extend generate load to generate swift objects
* CF-385 Unauthorized errors during glance image migration
* CF-364 Verify migration of dns_nameservers in subnets
* CF-379 Add cinder quota migration to all related scenarios
* [CF-352] Abort generate_load.py when vm spawned in ERROR state
* CF-258 Make tests as standalone installable package
* Updates to quick start guide
* CF-308 Document object mapping
* CF-370 EMC VMAX cleanup for non-root users
* Readme file updates based on new documentation

1.34.0
------

* [CF-5] Migrate DNS name servers
* Specify `pywbem` version to `0.7.0`
* [CF-270] Create black list feature for images in filter file
* [CF-257] Use migration name for estimate_migration
* [CF-257] Implement object selection engine
* Add YAML configuration validation
* [CF-343] Fix `CheckCloud` action
* Fix broken discover process
* [CF-271] Migrate image of vm if it's not specified in filter
* [FT] CF-171 Validate deleted images are restored only once
* [CF-318] Implement discover stage
* [CF-318] Implement stage framework
* [CF-332] Migrate config_drive instance parameter

1.33.0
------

* CF-302 Identity migration documentation
* [FT] CF-311 Validate cinder quotas migration
* CF-317 Networking migration documentation
* CF-295 update tests to create external neutron router
* [CF-312] Extend NovaCompute resource logs
* [FT] CF-61 Add check for ephemeral storage migration
* [CF-276] Optimize `get_tenants_list`
* CF-330 Remove failed volumes
* [CF-40] Adapt CF code for oslo.config 3.9.0
* Fix for CF-10 : keystone exception handling
* Print additional information for each scenario
* Updates cinder volume config file documentation
* [CF-249] Fix floating IPs migration
* [CF-235]Copy cinder quotas
* Cleans up unused volume migration actions
* Update network range in test config
* CF-323 Fix glance image migration in jenkins
* Set `db_port` to 3306 by default
* [CF-201] Extend functional tests to verify deleted image in dst with the same ID
* CF-296 Refactor test_verify_dst_functionality.py
* [CF-292] Correct mocking for KeystoneIdentityTestCase
* CF-319 Remove non-migrated volumes
* [CF-316] Change exclude_public_and_members name and behavior
* Install bbcp to cloudferry box

1.32.0
------

* [CF-265] Make ImageMember separate node in dependency graph
* CF-301 Cinder migration documentation
* [CF-310] Reset retrying during the run function call
* CF-300 Fixed matching src image and dst image
* Object model framework improvements
* CF-309 Convert brochure to sphinx format
* CF-304 Nova compute objects migration documentation
* [CF-279] Checking usage for copier
* [CF-279] Specify command to start bbcp on remote host Add default ssh options to bbcp command
* [CF-237] Migrate detached ports
* CF-288 Documentation

1.31.0
------

* [CF-294] Fix getting nonexistent instance for deploy_instance function
* CF-143 Cleanup unnecessary code
* [CF-161] VerifyVms shows incorrect results
* CF-259 Add VM to generate_load with deleted image
* cf-252 Change wait_until_* methods to not remove from list
* [CF-285] Check filters have one or less tenant
* CF-79 Verify migration of floating IPs into pre-created networks

1.30.0
------

* CF-143 Different backends for cinder
* CF-195 check deleted flavors are handled correctly
* CF-85 verify Neutron if non-overlapping resources exist on DST
* [CF-99] Add attribute override ability
* Fix clean_dst function of BaseCopier
* [CF-214] Exclude non-active images from migration

1.29.0
------

* [CF-154] Use bbcp in addition to rsync and scp
* [CF-191] Fix external networks mapping

1.28.0
------

* [CF-234] Fix key-pairs from deleted users under admin
* [CF-21] Check do we need to pass mysqldump password option
* CF-200 Optimized imports in testcases and test classes
* Retrying library
* Remove unused code from cfglib.py
* [CF-229] Recreate an image from vm in case of ssl error
* [CF-189] Fix CheckNetworks

1.27.0
------

* Create and mount loop devices for swift
* [CF-108] Migrate nova usage quotas

1.26.0
------

* CF-174 verify glance image UUIDs are kept the same
* [CF-225] Correct using of gateway variable
* CF-224 AssertionError: Members in server group
* [CF-217] Fix CheckUsersAvailabilityOnSrcAndDst
* [CF-213] Only migrate non-error volumes
* [CF-222] Hybrid resource migration scenario
* [CF-216] Fix finding of keystone resources by name
* [CF-218] Use a correct availability zone

1.25.0
------

* [CF-215] Use RemoteRunner to get IPs for a host
* [CF-212] Fix affinity migration
* Library for local command execution
* [CF-198] Write stdout to log
* [CF-211] Fix host for `SshUtil`
* [CF-126] Check an image exists before creating
* [CF-113] Estimate migration
* [CF-198] Fix importing of actions
* [CF-178] Reduce time to start VM migration

1.24.0
------

* [CF-149] Fix filtering by tenant
* [CF-183] Don't scan all nova resources if filter by tenant is specified
* Restart nova-compute instead of start it
* CF-170 generate_load hangs without generating anything
* [CF-181, CF-202] Fix a problem with duplicate images
* [CF-86] Use dd instead of sftp
* [CF-198] Write ALL information into debug log file
* [CF-196] Fix deoptimizaton getting user roles
* [SC-186] Fix copy ephemeral disk when flavor was deleted
* Remove identity from glance with no rollback stage
* [CF-102] Add physical networks check
* [SC-185] Don't ever delete VMs from SRC cloud
* [CF-87] Show global progress of Cinder Volume migration
* Improve logging
* [CF-186] Add remote command execution logging
* [CF-175] Add region_name into creating openstack clients

1.23.0
------

* [CF-179] Add ability to filter out public images
* [SAIC-912] Wait volume to become available before delete
* [CF-110] Fix key error exception
* [CF-177] Add start/end task messages into log
* CF-156 Documentation for testcases and test methods
* Fixed test for server group
* Fixed using of host and ssh_host flags
* [CF-175] Create a cinder client with region
* [CF-167] Fix searching tenant by name
* [CF-168] Fix neutron quota precheck
* [FT] CF-41 Added check for physical network

1.22.0
------

* [SAIC-769] Compare subnets allocation pools
* Fixed rolback tests
* [CF-86] Fix recreating broken images Refactor ReCreateBootImage. Check that image exists on destination. Create images on destination with keeping old id. Implement unit tests
* [CF-164] Fix for scenario handling

1.21.0
------

* Fix pep8 issues
* [FT] Added physical_network to external network
* Fixed docker run instruction
* [CF-110] Keep order of interfaces
* CF-89 Show VM progress
* Add second private network to devlab
* CF-144 Fixed filter similiar vms
* SAIC-552 Added tests for lbaas resources migration
* CF-67 Added tests for voluems metadata
* CF-125 FT extened with check external_gateway_info
* [CF-43] Move base hierarchy of exceptions to cloudferrylib.base.exception

1.20.0
------

* Fixes for stages with no rollback
* CF-138 Refactor generate_load.py
* CF-140 Dockerfile for cloudferry
* Increase RAM for nfs VM
* Fix server group tests
* [FT] Fixed cleaning of private images
* Remove unused code in os2os.py module
* CF-135 Remove temp files for scp backend
* [CF-17] Fix required_tenants function
* CF-136 test_migrate_glance_belongs_to_deleted_tenant fails
* CF-135 Correct rsync copy arguments
* Fix pylint issues
* CF-129 Fix for runtime warning with rednose dependance
* [CF-130] Skip instances from deleted tenants
* Reduce number of nova API requests for CheckAffinity
* CF-119 Fixed tearDown in functional tests
* [Gen Load] Fixed router and lbaas monitors cleanup
* Use 7.1.2 version of pip
* [FT] Remove import cfglib
* CF-48 check if image with deleted primary tenant migrates successfully
* CF-118 None values in cinder DB
* [CF-16] Add timeout and abort_on_prompts options to the RemoteRunner
* [CF-106] Define debug handler for logging
* [CF-106] Show name of current task
* [CF-106] Rotate log file for every run
* [CF-106] Print additional information
* [CF-106] Refactor logging
* Removes unnecessary output from rsync
* [SAIC-646] Remove excess warnings from log
* SAIC-810 Retry VM boot in correct availability zone
* Update pylintrc
* [CF-23] Add verify step into migrate_vms.yaml
* SAIC-808 Use rsync for ephemeral storage transfer
* SAIC-547 Fixed and refactored rollback test
* SAIC-511: Cinder volume backend refactoring
* SAIC-785 Extend functional tests to verify routers are migrated correctly when filtering enabled

1.19.0
------

* SAIC-772 Added tests for server groups
* Fixed creating lbaas resources and added cleanup for them
* [SAIC-756] Granular VM restore from snapshot for src and dst
* Fixed flavors cleanup in generate load
* Fix wrong indent in GlanceImageProgessMigrationView
* [SAIC-798] Add ability to set SSH cipher
* [SAIC-720] Fix same name flavor removal
* [SAIC-816] Rebase ephemeral disks after migration
* [SAIC-551] LBaaS neutron objects migration
* SAIC-828 Add specific tests execution after each tenant migration
* [SAIC-184] Vagrant commands outside of devlab folder
* SAIC-799: Fix conflict attempting to store user
* SAIC-790 Automated test for router migration
* [SAIC-820] Add boot_timeout option
* SAIC-727 Verify invalid cinder volumes skipping
* SAIC-757 Extend FT with non-public flavors migration

1.18.0
------

* Added missed insecure option to glance image resource
* SAIC-545 Extened test for volume migration
* [SAIC-793] Improve keypairs migration speed
* [SAIC-797] Fix ReCreateBootImage
* [SAIC-453] Extend func tests due to different admin tenants migration            Config passed as argument to generator and tests
* [SAIC-711] Create routers in its tenant
* SAIC-795 Fixes invalid log format
* [SAIC-791] Add handlers for logger 'paramiko.transport'
* Remove unused import from prepare_networks.py
* SAIC-789 Fix broken CopyFromGlanceToGlance
* [SAIC-780] Skip the broken images
* [SAIC-736] Remove instances which are failed by timeout
* [SAIC-491] Extend tests to verify one tenant is filtered
* SAIC-762 Fixed getting info about "host" of VM
*  "Behind the proxy" support for devlab setup
* [SAIC-743] Migrate affinity settings
* [SAIC-755] CF scenarios with disabled Rollback. Add CF scenarios for resources and VM migration with NO Rollback

1.17.0
------

* SAIC-672 Support JSON and human output for qemu-img
* [SAIC-740] Filter flavors by tenant
* SAIC-686 Added test for deleted from back-end image
* SAIC-674 Added test for deleted vm via virsh
* SAIC-741 Removed user tenant role recretion
* Remove unnecessary steps from stages scenarios

1.16.0
------

* SAIC-737 Fix get_mac_by_ip method for neutron
* SAIC-739 Continue creating router interfaces after failure
* SAIC-672 Handle qemu-img with actual path
* [SAIC-726] Improve existing image detection
* [SAIC-735] Check 'user_name' property in glance
* [SAIC-732] Fix `speed_limit` for Images transfer
* [SAIC-673] Fix images filtering
* [SAIC-734] Don't migrate snapshot properties
* SAIC-725: Skip volumes with invalid statuses

1.15.0
------

* SAIC-543: Cinder volume migration
* Check cloud logging improvements
* SAIC-691 Remove DHCP port on IP address conflict
* SAIC-675 Invalid flavorRef while running checks
* Incrase RAM for vagrant grizzly box

1.14.0
------

* [SAIC-684] Recreate non-accessible image if used by active VM
* Return cloudferry box
* [SAIC-654] Improve Neutron logs

1.13.0
------

* Added an ability for using multiple ssh keys
* SAIC-688 Add ability to specify several ext CIDRs
* SAIC-687 List all flavors, not only public
* [SAIC-546] Set nonzero exit code if migration finished with failure
* [SAIC-677] Fix glance images deployment
* [SAIC-536] CF scenarios: migration in stages

1.12.0
------

* [SAIC-580] Remove admin roles from tenants
* Returned missed storage host option
* SAIC-595 added test for neutron quota migration
* SAIC-658 Random VM scheduling update
* [SAIC-565] Network info retreiving optimization

1.11.0
------

* SAIC-554 cold evacuation support
* [SAIC-518] Migrates server group resources

1.10.0
------


1.9.0
-----

* Skips down or disabled hosts
