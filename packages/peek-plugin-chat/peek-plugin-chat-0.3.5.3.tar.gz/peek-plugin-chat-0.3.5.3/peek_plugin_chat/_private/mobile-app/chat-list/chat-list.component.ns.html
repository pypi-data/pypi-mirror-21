<StackLayout class="p-20">

    <!--NEW CHAT DIALOG -->
    <pl-chat-new-chat
            *ngIf="isNewChatDialogShown()"
            (create)="dialogConfirmed($event)"
            (cancel)="dialogCanceled()"
            [data]="newChatDialogData">

    </pl-chat-new-chat>

    <!-- top nav buttons -->
    <WrapLayout *ngIf="!isNewChatDialogShown()">
        <Button text="New Chat" (tap)="newChatClicked()"></Button>
    </WrapLayout>


    <!-- chat list -->
    <ListView [items]="chats">
        <StackLayout *ngFor="let i = index; let chat of chats"
                     [class.odd]="odd" [class.even]="even"
                     (tap)="chatClicked(chat)">
            <WrapLayout>

                <!-- Unread indicator -->
                <Label *ngIf="isChatRead(chat)" class="fa h2"
                       [text]="'fa-fw' | fonticon"></Label>

                <Label *ngIf="!isChatRead(chat)" class="fa h2"
                       [text]="'fa-comment-o' | fonticon"></Label>

                <!-- Users -->
                <WrapLayout *ngFor="let user of otherChatUsers(chat)">
                    <Label class="h3 peek-field-data-text bg-success p-5" textWrap="true"
                           text="{{userDisplayName(user)}} ({{user.userId}})"></Label>
                    <Label text=" "></Label>
                </WrapLayout>

            </WrapLayout>
        </StackLayout>
    </ListView>
</StackLayout>

