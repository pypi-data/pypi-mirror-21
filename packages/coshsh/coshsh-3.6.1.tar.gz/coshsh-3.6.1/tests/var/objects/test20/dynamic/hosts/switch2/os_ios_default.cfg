# check_nwc_health_v2
define service {
  service_description             os_ios_default_check_uptime
    host_name                       switch2
    use                             os_ios_default
    check_command                   check_nwc_health_v2!\
        $HOSTADDRESS$!30!$_HOSTCOMMUNITY$!\
        uptime!--warning 0: --critical 0:
}

define service {
  service_description             os_ios_default_check_hardware
    host_name                       switch2
    use                             os_ios_default,srv-perf
    check_command                   check_nwc_health_v2!\
        $HOSTADDRESS$!60!$_HOSTCOMMUNITY$!\
        hardware-health
    check_interval                  30
}

define service {
  service_description             os_ios_default_check_memory
    host_name                       switch2
    use                             os_ios_default,srv-perf
    check_command 
    check_command                   check_nwc_health_v2!\
        $HOSTADDRESS$!30!$_HOSTCOMMUNITY$!\
        memory-usage!--warning 95 --critical 95
}

define service {
  service_description             os_ios_default_check_cpu
    host_name                       switch2
    use                             os_ios_default,srv-perf
    check_command 
    check_command                   check_nwc_health_v2!\
        $HOSTADDRESS$!30!$_HOSTCOMMUNITY$!\
        cpu-load!--warning 95 --critical 95
}

define service {
  service_description             os_ios_default_check_chassis
    host_name                       switch2
    use                             os_ios_default,srv-perf
    check_command                   check_nwc_health_v2!\
        $HOSTADDRESS$!60!$_HOSTCOMMUNITY$!\
        chassis-hardware-health --mitigation ok
    check_interval                  30
}

define servicedependency {
  name                             dependency_os_ios_default_check_uptimeswitch2
  host_name                        switch2
  service_description              os_ios_default_check_uptime
  # not u,c (u usually means: no snmp connect)
  execution_failure_criteria       u,p
  notification_failure_criteria    u
  dependent_service_description    os_ios_.*,\
                                   !os_ios_default_check_uptime
}

