// NtDocutils https://ntrrg.github.io/NtDocutils/
// Copyright 2017 Miguel Angel Rivera Notararigo
// Licensed under The MIT License. See LICENSE file for full licensing details.

window.addEventListener("load",function(){docinfo();OSFilter();options();links();noPrint()});function docinfo(){var fields=document.querySelectorAll(".docinfo dt");for(var i=0;i<fields.length;++i){var field=fields[i];var icon;switch(field.className){case "author":icon="person";break;case "authors":icon="people";break;case "organization":icon="group_work";break;case "contact":icon="email";break;case "address":icon="place";break;case "version":icon="code";break;case "status":icon="show_chart";break;case "date":icon="access_time";break;case "copyright":icon="copyright";break;case "license":icon="copyright";break;default:icon="info";break};var icon=elementCreate("i",{"class":"material-icons","title":field.textContent,"textContent":icon});elementUpdate(field,{"innerHTML":""});field.appendChild(icon)}}
function links(){var links=document.querySelectorAll("a:not([href^='#'])");for(var i=0;i<links.length;++i){var link=links[i];if(link.href)
elementUpdate(link,{"target":"_blank"})}}
function noPrint(){var sheets=document.styleSheets;for(var i=0;i<sheets.length;++i){var sheet=sheets[i];if(sheet.href)
continue;var rules=(sheet.cssRules)?sheet.cssRules:sheet.rules;for(var i2=0;i2<rules.length;++i2){var rule=rules[i2];if(rule.cssText.search("@media print")>=0)
sheet.deleteRule(i2)}}}
function options(){var optionsButton=document.querySelector("#options button:first-child");var optionsIcon=optionsButton.querySelector("i.material-icons");optionsButton.addEventListener("click",function(){var buttons=document.querySelectorAll("#options button:not(:first-child), #options a button");var icon;if(this.className.search("open")<0){for(var i=0;i<buttons.length;++i)
elementUpdate(buttons[i],{"style":{"bottom":115*(i+1)+"%"}});icon="close"}
else{for(var i=0;i<buttons.length;++i)
elementUpdate(buttons[i],{"style":{"bottom":"0px"}});icon="more_vert"}
classToggle(this,"open");elementUpdate(optionsIcon,{"textContent":icon})});var themeButton=elementCreate("button",{"class":"mdl-button mdl-js-button mdl-button--fab mdl-js-ripple-effect mdl-button--accent"});document.querySelector("#options").appendChild(themeButton);componentHandler.upgradeElement(themeButton);var icon=elementCreate("i",{"class":"material-icons","textContent":"invert_colors"});themeButton.appendChild(icon);themeButton.addEventListener("click",function(){var container=document.querySelector(".mdl-layout");var message;if(container.className.search("theme-dark")<0)
message="Dark theme is enabled";else message="Dark theme is disabled";classToggle(container,"theme-dark");snackbar(message)});var printButton=document.querySelector("#options button.print");printButton.addEventListener("click",function(){print()});var menu=document.querySelector("#options button.attachments ~ .mdl-menu__container ul.mdl-menu");if(window.ATTACHMENTS){for(var i=0;i<ATTACHMENTS.length;++i){var file=ATTACHMENTS[i];var link=elementCreate("a",{"href":file.url,"download":(file.name)?file.name:""});menu.appendChild(link);var li=elementCreate("li",{"class":"mdl-menu__item","textContent":(file.name)?file.name:file.url});link.appendChild(li);var icon;if(file.icon)
icon=file.icon;else{switch(file.url.match(/\..+$/g)[0]){case ".pdf":icon="picture_as_pdf";break;case ".jpg":case ".jpeg":case ".png":case ".svg":icon="image";break;default:icon="insert_drive_file";break}}
var icon=elementCreate("i",{"class":"material-icons","textContent":icon});li.appendChild(icon)}}
else elementDelete(document.querySelector("#attachments-button"))}
function OSFilter(){var elements=document.querySelectorAll(".os");var osList=[];var re=/os\-[\w\-]+/g;for(var i=0;i<elements.length;++i){var element=elements[i];var osElement=element.className.match(re).map(function(value){return value.substr(3)});if(i==0)
OSSelect(osElement[0]);for(var i2=0;i2<osElement.length;++i2){var os=osElement[i2];if(osList.indexOf(os)<0)
osList.push(os)}}
osList.sort();for(var i=0;i<osList.length;++i){var os=osList[i];var button=elementCreate("button",{"class":"mdl-button mdl-js-button mdl-button--raised mdl-button--accent mdl-js-ripple-effect","data-os":os,"textContent":os.toUpperCase()});document.querySelector("#os_selection").appendChild(button);button.addEventListener("click",function(){var os=this.dataset.os;OSSelect(os);snackbar("OS change to "+os.toUpperCase())});componentHandler.upgradeElement(button)}}
function OSSelect(os){var elements=document.querySelectorAll(".os:not(.os-"+os+")");for(var i=0;i<elements.length;++i)
classDelete(elements[i],"is-visible");elements=document.querySelectorAll(".os-"+os);for(var i=0;i<elements.length;++i)
classAdd(elements[i],"is-visible");}
function snackbar(message){var container=document.querySelector("#snackbar");var data={"message":message};container.MaterialSnackbar.showSnackbar(data)}
function classAdd(element,classNames){var classNames=classNames.split(" ");var result=element.className;for(var i=0;i<classNames.length;++i){var className=classNames[i];if(result.search(className)<0)
result+=" "+className}
element.className=result}
function classDelete(element,classNames){var classNames=classNames.split(" ");var result=element.className;for(var i=0;i<classNames.length;++i){var className=classNames[i];if(result.search(className)>=0){result=result.replace(new RegExp(className,"g"),"");result=result.replace(/ {2,}/g," ");result=result.trim()}}
element.className=result}
function classToggle(element,classNames){var classNames=classNames.split(" ");for(var i=0;i<classNames.length;++i){var className=classNames[i];if(element.className.search(className)<0)
classAdd(element,className);else classDelete(element,className)}}
function elementCreate(type,attributes){var element=document.createElement(type);if(attributes)
elementUpdate(element,attributes);return element}
function elementDelete(element){element.parentNode.removeChild(element)}
function elementUpdate(element,attributes){for(attribute in attributes){switch(attribute){case "innerHTML":case "textContent":element[attribute]=attributes[attribute];break;case "style":for(subattr in attributes[attribute])
element[attribute][subattr]=attributes[attribute][subattr];break;default:element.setAttribute(attribute,attributes[attribute]);break}}}